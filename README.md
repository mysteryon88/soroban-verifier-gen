# Soroban Groth16 Verifier Generator

Generate Soroban smart contracts for Groth16 zero-knowledge proof verification.

## Description

This crate provides tools to generate Soroban smart contracts that can verify Groth16 zero-knowledge proofs on the Stellar blockchain. It reads verification keys in JSON format (typically generated by circom/snarkjs) and generates a complete Soroban contract crate ready for deployment.

## Features

- Converts Groth16 verification keys from JSON to Soroban contract code
- Generates complete contract crates with all necessary dependencies
- Supports BLS12-381 curve (used by Soroban)
- Validates verification key structure
- Generates optimized contract code with embedded verification key constants

## Usage

Add this to your `Cargo.toml`:

```toml
[dependencies]
soroban-verifier-gen = "0.1.0"
```

### Example

```rust
use soroban_verifier_gen::{GenerateOptions, generate_verifier_contract_to_dir};

fn main() -> anyhow::Result<()> {
    generate_verifier_contract_to_dir(GenerateOptions {
        vk_json_path: "verification_key.json".into(),
        out_dir: "contracts/my_verifier".into(),
        contract_name: "MyGroth16Verifier".into(),
        crate_name: "my_verifier".into(),
    })?;
    Ok(())
}
```

### Input Format

The crate expects a verification key JSON file in the following format (as generated by circom/snarkjs):

```json
{
    "protocol": "groth16",
    "curve": "bls12381",
    "nPublic": 1,
    "vk_alpha_1": ["x", "y", "z"],
    "vk_beta_2": [[...], [...], [...]],
    "vk_gamma_2": [[...], [...], [...]],
    "vk_delta_2": [[...], [...], [...]],
    "IC": [[...], [...]]
}
```

### Output

The generator creates a complete Soroban contract crate with:
- `Cargo.toml` with proper dependencies
- `src/lib.rs` with the verification contract implementation
- Embedded verification key constants
- Ready-to-deploy contract code